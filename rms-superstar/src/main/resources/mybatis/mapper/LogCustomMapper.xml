<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.still.rms.superstar.dao.LogCustomMapper">
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, user_id, username, nickname, start_time, spend_time, description, base_path,
        uri, url, http_method, remote_user, remote_ip, remote_port, remote_addr, `parameter`,
        return_code, return_msg, clazz_name, method_name
    </sql>
    <sql id="Blob_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        return_data
    </sql>

    <sql id="Where">
        <where>
            <if test="id != null">
                AND id = #{id,jdbcType=INTEGER}
            </if>
            <if test="username != null">
                AND (`username` = #{username,jdbcType=VARCHAR} OR `nickname` = #{username,jdbcType=VARCHAR})
            </if>
            <if test="startTime != null">
                AND `start_time` = #{startTime,jdbcType=TIMESTAMP}
            </if>
            <if test="spendTime != null">
                AND spend_time = #{spendTime,jdbcType=INTEGER}
            </if>
            <if test="url != null">
                AND url = #{url,jdbcType=VARCHAR}
            </if>
            <if test="httpMethod != null">
                AND http_method = #{httpMethod,jdbcType=VARCHAR}
            </if>
            <if test="remoteIp != null">
                AND remote_ip = #{remoteIp,jdbcType=VARCHAR}
            </if>
            <if test="returnCode != null">
                AND return_code = #{returnCode,jdbcType=INTEGER}
            </if>
            <if test="returnMsg != null">
                AND return_msg = #{returnMsg,jdbcType=VARCHAR}
            </if>
            <if test="clazzName != null">
                AND clazz_name = #{clazzName,jdbcType=VARCHAR}
            </if>
            <if test="methodName != null">
                AND method_name = #{methodName,jdbcType=VARCHAR}
            </if>
        </where>
    </sql>

    <select id="queryLogs" resultType="com.still.rms.common.dto.LogDto">
        SELECT
        <include refid="Base_Column_List"></include>
        FROM log
        <include refid="Where"></include>
    </select>

</mapper>